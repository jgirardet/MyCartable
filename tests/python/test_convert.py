import base64
import io
from dataclasses import dataclass
from pathlib import Path
from subprocess import CalledProcessError
from time import sleep
from unittest.mock import patch

import PIL
import PyPDF2
import pytest
from PySide2.QtCore import QBuffer, QByteArray, QSize
from PySide2.QtGui import QImage, QPainter
from package import BINARY
from package.convert import (
    get_binary_path,
    get_command_line_pdftopng,
    collect_files,
    run_convert_pdf,
    find_soffice,
    soffice_convert,
    escaped_filename,
    templates,
    draw_annotation_dessin,
    draw_annotation_text,
    create_images_with_annotation,
    escape,
    new_automatic_text,
    text_section,
    image_section,
    get_image_size,
)
import sys

from package.database.factory import *
from package.files_path import TMP, FILES
from package.ui_manager import UiManager


def test_get_binary_path():
    if sys.platform == "linux":
        assert get_binary_path("bla") == BINARY / "bla"
    elif sys.platform == "win32":
        assert get_binary_path("bla") == BINARY / "bla.exe"


def test_command_line_pdftopng():

    assert get_command_line_pdftopng("bla.pdf", "root", resolution=111) == [
        str(get_binary_path("pdftopng")),
        "-r",
        "111",
        "bla.pdf",
        "root",
    ]
    res = get_command_line_pdftopng(Path("bla.pdf"), Path("root"), resolution=111)
    assert all(isinstance(x, str) for x in res)


def test_collect_files_no_prefix(tmp_path):

    # standard
    res = []
    for i in range(5):
        name = "bla000" + str(i) + ".png"
        p = tmp_path / name
        p.touch()
        res.append(p)
    assert collect_files(tmp_path, ext=".png") == res
    assert res[1] == tmp_path / "bla0001.png"


def test_collect_files_standard_avec_prefix(tmp_path):
    # standard avec prefix
    pref = "pref"
    res = []
    for i in range(5):
        name = pref + "bla000" + str(i) + ".png"
        p = tmp_path / name
        p.touch()
        res.append(p)
    assert collect_files(tmp_path, pref=pref, ext=".png") == res
    assert res[1] == tmp_path / "prefbla0001.png"


def test_collect_files_standard_checkordalphbetique(tmp_path):

    # check  ordre alphabétique
    res = []
    for i in range(1, 6):
        name = "bla000" + str(i) + ".png"
        p = tmp_path / name
        p.touch()
        res.append(p)

    name = "bla000" + str(0) + ".png"
    p = tmp_path / name
    p.touch()
    res = [p] + res

    assert collect_files(tmp_path, ext=".png") == res


# @pytest.mark.skip("lent")
def test_convert_pdf(resources, tmp_path):
    res = run_convert_pdf(resources / "2pages.pdf", tmp_path / "rien")
    assert len(res) == 2
    for f in res:
        assert f.is_file()
        assert f.name.startswith("xxx")  # le default

    assert run_convert_pdf(resources / "xxxxxx .pdf", tmp_path / "rien") == []
    assert (
        run_convert_pdf(resources / "xxxxxx .pdf", tmp_path / "rien", timeout=0) == []
    )


def test_find_soffice(qtbot):

    # default dir
    assert find_soffice()

    # en cherchant
    with patch("package.convert.Path.is_file", return_value=False):
        assert find_soffice()

    # pas trouvé
    class Rien:
        stdout = b""

    with pytest.raises(EnvironmentError):
        with patch("package.convert.Path.is_file", return_value=False):
            with patch("package.convert.subprocess.run", return_value=Rien()):
                find_soffice()

    # pas trouvé avec toast
    with pytest.raises(EnvironmentError):
        with patch("package.convert.Path.is_file", return_value=False):
            with patch("package.convert.subprocess.run", return_value=Rien()):
                ui = UiManager()
                with qtbot.waitSignal(ui.sendToast):
                    find_soffice(ui=ui)


# @pytest.mark.skip("lent")
def test_soffice_convert(ddbr, resources):
    content: str = (resources / "empty.fodt").read_text()
    ui = UiManager()

    # PDF
    (TMP / "blabla.pdf").unlink()
    with patch("package.convert.build_odt", return_value=content):
        res = soffice_convert(1, "pdf:writer_pdf_Export", "blabla.pdf", ui)
    assert res == TMP / "blabla.pdf"
    assert PyPDF2.PdfFileReader(str(res))

    # ODF
    (TMP / "blabla.odt").unlink()
    with patch("package.convert.build_odt", return_value=content):
        res = soffice_convert(1, "odt", "blabla.odt", ui)
    assert res == TMP / "blabla.odt"
    assert res.is_file()


@pytest.mark.parametrize(
    "inp,out,ext",
    [
        ("éàèùêç", "eaeuec", ".odt"),
        ("a b c", "a_b_c", ".odt"),
        ("a&@$-%c.?!^'(-b_", "acb_", ".odt"),
    ],
)
def test_escaped_filename(inp: str, out: str, ext: str):
    assert escaped_filename(inp, ext) == out + ext


def test_templates_creaete_lookup():
    for t in [
        "base",
        "styles",
        "automatic-styles",
        "master-styles",
        "master-styles",
    ]:
        assert templates.get_template(t + ".xml")


#
# @pytest.mark.parametrize(
#     "annot,res",
#     [
#         (
#             {
#                 "id": 1,
#                 "x": 0,
#                 "y": 0.5,
#                 "section": 2859,
#                 "classtype": "AnnotationDessin",
#                 "width": 1,
#                 "height": 0.5,
#                 "tool": "rect",
#                 "startX": 0.9,
#                 "startY": 0.9,
#                 "endX": 0.1,
#                 "endY": 0.1,
#                 "styleId": 9750,
#                 "family": "Arial",
#                 "underline": False,
#                 "pointSize": 1.0,
#                 "strikeout": False,
#                 "weight": None,
#                 "bgColor": QColor.fromRgbF(0.000000, 0.000000, 0.000000, 1.000000),
#                 "fgColor": QColor.fromRgbF(0.000000, 0.000000, 0.000000, 1.000000),
#             },
#             b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x01,\x00\x00\x00\xc8\x08\x02\x00\x00\x00\xdd\xbdK\x02\x00\x00\x00\tpHYs\x00\x00\x0e\xc4\x00\x00\x0e\xc4\x01\x95+\x0e\x1b\x00\x00\x02\x99IDATx\x9c\xed\xd7\xc1m\xc30\x14\x05\xc1$p_Vg\x16+\xb3U\x19SBN_{\xc8L\x01\x8f<h!\xf0{\xef\xfd\x05t~\xea\x0b\xc0\x7f\'B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!\xf6\x18]_k\x8d\xee\xc3=^\xaf\xd7\xdc\xf8`\x84k\xad\xf7\xfb}\x1c\xc7\xdc\x11p\x83\xeb\xba\xf6\xde\xe7y\x0e\xed\xcf\xfe\t\x8f\xe3\x98\xbb:\xdcc\xad\xb5\xf7\x9e\xdb\xf7&\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88=F\xd7\xaf\xebZk\x8d\x1e\x01\xd3>\x9f\xcf\xf3\xf9\x9c\xdb\xff\xde{\xcf\xad\x9f\xe797\x0e\xb7\x19\xfd\x92g#\x04\xfe\xe4M\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x08\xb1_\xa88)P\xd7U\xae&\x00\x00\x00\x00IEND\xaeB`\x82',
#         ),
#         (
#             {
#                 "id": 1,
#                 "x": 0,
#                 "y": 0,
#                 "section": 2859,
#                 "classtype": "AnnotationDessin",
#                 "width": 0.5,
#                 "height": 0.5,
#                 "tool": "fillrect",
#                 "startX": 0.1,
#                 "startY": 0.1,
#                 "endX": 0.9,
#                 "endY": 0.9,
#                 "styleId": 9750,
#                 "family": "",
#                 "underline": False,
#                 "pointSize": 10.0,
#                 "strikeout": False,
#                 "weight": None,
#                 "bgColor": QColor("blue"),
#                 "fgColor": QColor.fromRgbF(0.000000, 0.000000, 0.000000, 1.000000),
#             },
#             b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x01,\x00\x00\x00\xc8\x08\x02\x00\x00\x00\xdd\xbdK\x02\x00\x00\x00\tpHYs\x00\x00\x0e\xc4\x00\x00\x0e\xc4\x01\x95+\x0e\x1b\x00\x00\x02XIDATx\x9c\xed\xd5\xb1\r\x80@\x0c\x04A@t\xf4\xfd\x97@M\xa6\x08\x906\xf8\x99\xdc\xd2%+\x9f3s\x00\x9d\xab\x1e\x00\xbb\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4\xee/\xc7\xcf\xf3\xd7\x0c\x8e\xb5\xea\x05D|B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b"\x84\x98\x08!&B\x88\x89\x10b\xe7\xcc\xd4\x1b`k>!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4D\x081\x11BL\x84\x10\x13!\xc4^\x01\x87\t\x8bn\xba\xf3.\x00\x00\x00\x00IEND\xaeB`\x82',
#         ),
#         (
#             {
#                 "id": 1,
#                 "x": 0.25,
#                 "y": 0.25,
#                 "section": 2859,
#                 "classtype": "AnnotationDessin",
#                 "width": 0.5,
#                 "height": 0.5,
#                 "tool": "trait",
#                 "startX": 0.1,
#                 "startY": 0.1,
#                 "endX": 0.5,
#                 "endY": 0.5,
#                 "styleId": 9750,
#                 "family": "",
#                 "underline": False,
#                 "pointSize": 10.0,
#                 "strikeout": False,
#                 "weight": None,
#                 "bgColor": QColor("blue"),
#                 "fgColor": QColor("red"),
#             },
#             b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x01,\x00\x00\x00\xc8\x08\x02\x00\x00\x00\xdd\xbdK\x02\x00\x00\x00\tpHYs\x00\x00\x0e\xc4\x00\x00\x0e\xc4\x01\x95+\x0e\x1b\x00\x00\x04\xcfIDATx\x9c\xed\xdd\xbdN\x94\t\x18\x86\xe1\xd7- Q\x0f\x01\xed4\xd2\xc91@\xe2\x11\xa0\xc6\xc43\xf0g\x05\x83\xb1\xc0\xc4(\xc6D\x81B\x0b\x13;\x1b5jo\xd4\xe81\xa8Q\xa0\xf5\xe7\x08\x94B,\xd8B\xc9j\x16\\\x86\x99\x8fg\x98\xb9\xae\x0e2_\xf26w\xbe\x07\n\xd8\xb5\xba\xbaZ@\xce_\xe9\x03\xa0\xdf\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89p=_\xbf\xd6\x89\x13\xb5\xb0\x90\xbe\x83\xbe \xc2\xf5\\\xbe\\\xf7\xef\xd7\xe1\xc355U_\xbf\xa6\xaf\xa1\xc7\xedZ]]M\xdf\xd0e\xde\xbf\xaf\x91\x91ZY\xf9\xf9\xe5\xd0P\xdd\xbcY\xc7\x8eEo\xa2\x97y\x13\xfe\xc7\xa9S\xff\x16XU\x9f>\xd5\xf1\xe35:j\x9d\xd2\x10\x11\xfe\xee\xc1\x83z\xf5j\x9d\xef\xbf|i\x9d\xd2\x10s\xf4\x17_\xbe\xd4\xf0p}\xfe\xfc\xa7\xcfX\xa7t\x9a7\xe1/._\xfe\x9f\x02km\x9d\x8e\x8dY\xa7t\x8a7\xe1\x9aw\xefjd\xa4\xbe\x7f\xdf\xec\xe7\x07\x06\xea\xec\xd9\xbat\xa9\xf6\xeem\xf2,z\x9f7\xe1\x9a\x99\x99\x16\n\xac\xaa\x95\x95\xbaq\xa3\x86\x87\xeb\xe1\xc3\xc6n\xa2/\x88p\xcd\xdd\xbbu\xf1b\r\x0e\xb6\xf6\x94uJ\xdb\xcc\xd1\xdf--\xd5\x993\xf5\xecY\xcb\x0f\x0e\x0c\xd4\xdf\x7f\xd7\xf4\xb4uJ\xabD\xb8\x9e\'Ojb\xa2>|h\xf9\xc1\xa1\xa1\x9a\x9d\xad\xa3G\x1b\xb8\x89\x9e%\xc2\r,/\xd7\xccL\xcd\xcd\xd5\xb7o-?;:Z\xb7n\xd5\xf0p\x03g\xd1\x83D\xf8G\xd6)\xcd\x13\xe1&<~\\\x93\x93\xd6)\r\x11\xe1\xe6,/\xd7\xd5\xab5?o\x9d\xd2q"l\xc5\xd2R\x9d>]\xcf\x9f\xb7\xfc\xa0u\xca\xc6D\xd8\xba\xc7\x8fkb\xa2>~l\xf9A\xeb\x94\xf5\x88pK\xda\\\xa7\xb7o\xd7\xa1C\r\x9c\xc5\x8e$\xc26X\xa7t\x82\x08\xdbf\x9d\xd2\x1e\x11vB;\xebtl\xacn\xdd\xb2N\xfb\x99\x08;\xa7\xcduz\xe9R\xed\xd9\xd3\xc0Yt;\x11v\x9auJ\x8bD\xd8\x80\x1f\xebtn\xee\xb7?\x18\xb5I\xd6i\xff\x11ac\xdaY\xa7\xe7\xce\xd5\xf4\xb4u\xda\'D\xd8\xb0-\xaf\xd3}\xfbjv\xb6\xc6\xc7\x1b\xb8\x89\xee"\xc2\xe6Y\xa7\xfc\x91\x08\xb7\x8bu\xca\x06D\xb8\xbd\x1e=\xaa\xc9I\xeb\x94_\x89p\xdb-/\xd7\x95+5?o\x9d\xf2\x83\x08C\x16\x17\xeb\xf4\xe9z\xf1\xa2\xe5\x07\xad\xd3\x9e#\xc2(\xeb\x14\x11\xe6Y\xa7}O\x84\xdd\xc1:\xedc"\xec&[^\xa7\'O\xd6\xbd{\r\x1c\xc4v\x10a\x97\xd9\xc2:\x1d\x1c\xac7o\xea\xe0\xc1&\xcf\xa2A\xfe\x17E\x97\xd9\xb3\xa7\xae_\xaf\xd7\xafkll\xb3\x8fLL(pG\xf3&\xecb\x9bY\xa7\xfb\xf7\xd7\xc2B\xed\xde\xbd]7\xd1y\xde\x84]l|\xbc\x16\x16\xea\xc2\x85\x1a\x18\xd8\xf03\xf3\xf3\n\xdc\xe9\xbc\tw\x82\x8d~wz\xe4H=}\x9a8\x88N\x12\xe1\xce\xf1\xe8QML\xd4\xa7O?\xbf\x1c\x1c\xac\xb7o\xeb\xc0\x81\xe8Mt\x809\xbas\x8c\x8f\xd7\xe2bMM\xfd\\\xa7\xe7\xcf+\xb07x\x13\xee@\x8b\x8bu\xedZ\xdd\xb9\xe3\xa7\xc1\xde B\x083G!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!L\x84\x10&B\x08\x13!\x84\x89\x10\xc2D\x08a"\x840\x11B\x98\x08!\xec\x1fa\t\x85h\x18\xec/\xaf\x00\x00\x00\x00IEND\xaeB`\x82',
#         ),
#         (
#             {
#                 "id": 1,
#                 "x": 0.5,
#                 "y": 0,
#                 "section": 2859,
#                 "classtype": "AnnotationDessin",
#                 "width": 0.33,
#                 "height": 1,
#                 "tool": "ellipse",
#                 "startX": 0,
#                 "startY": 0,
#                 "endX": 1,
#                 "endY": 0.9,
#                 "styleId": 9750,
#                 "family": "",
#                 "underline": False,
#                 "pointSize": 10.0,
#                 "strikeout": False,
#                 "weight": None,
#                 "bgColor": QColor("blue"),
#                 "fgColor": QColor("purple"),
#             },
#             b"\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x01,\x00\x00\x00\xc8\x08\x02\x00\x00\x00\xdd\xbdK\x02\x00\x00\x00\tpHYs\x00\x00\x0e\xc4\x00\x00\x0e\xc4\x01\x95+\x0e\x1b\x00\x00\x15\x81IDATx\x9c\xed\xdd{T\x14W\x9e\x07\xf0\xea\x07\xdd<\xbay4\xd8\xbc\x82\x80\x08j@\t\x04\x0c\x0f\x83\x9a\xa0F\xcd\xe0\xa0\xee\xa0\xa3\xcb\xee\xaa\xc9\x99L\xd6\xd9\xbc\x1fg\xc7\xec\xcc${\xc6<\x8f\x93\xcdL\xe6$\xc1=11FWQ4JT\x1c\x94\x08\x12!\x10\x14\xa2\x02\xca+ \xb4\xd0\xbc\x9aG7\xdd]\xfb\x873\x8c\x13\xc3\xaf\x1a\xe8\xbaUu\xfb\xf7\xf9\xb7~\xd2\xbfj\xeb\xdb\xf7vu\xd5-\x19\xcb\xb2\x0cBS\xc5\xda\xd8\xaeK]-%-\x86ZCO}O_s\x9fy\xd0l1Y\x18\x86QiTj\xad\xda7\xc2\xd7?\xc6_\x1f\xa7\x0f\xcf\x08\x0f\\\x10(S\xc8\x84nYtd\x18B4\x056\xb3\xad\xf1dc\xdd\xfe\xba\xfa\xe3\xf5\xe6~\xb3\x83\xffJ\xed\xa3\x8eY\x1d\x13\xb7!.jy\x94B\xad\xe0\xb5C\t\xc1\x10\xa2\xc91\x0f\x98+\xfeTq\xe1\x9d\x0b\xc3\xb7\x86\xa7\xfcG<gx\xa6>\x93\xba\xf0\xc9\x85*\xad\xca\x89\xbdI\x14\x86\x109j\xb4w\xf4\xebw\xbf.\xffC\xf9h\xef\xa8S\xfe\xa0\xbb\x9f{\xcaS)\x0f\xfc\xea\x01w_w\xa7\xfcA\x89\xc2\x10\"n6\x8b\xed\xfc\xce\xf3\x17\xde\xbe`\x1ept\xe6\xe98\xb5\xb7:\xf5\xd9\xd4E/-R\xa8\\t\x82\x8a!D\x1c\x0c\x97\r\x87s\x0fw~\xdb\xc9\xeb\xab\x04\xdd\x17\x94\xfdI\xb6>N\xcf\xeb\xab\x88\x13\x86\x10M\x88\xb5\xb1eo\x95\x15\xbfRl\xb3\xd8\x08\xbc\x9cB\xa5X\xfa\xea\xd2\xb4g\xd3\\\xed\x0c*\x86\x10\xfd\xb8\xbe\xa6\xbe\xfc\xcd\xf9mem\x84_7,-l\xed\xa7k}#}\t\xbf\xae\x800\x84\xe8GtTv\xec]\xb5w:\xe7?\xa7\xc3K\xef\xb5\xe9\xc4\xa6\xe0\xfb\x83\x05yu\xf20\x84\xe8\x87\x1a\xbfl<\xb0\xfe\xc0\xd8\xd0\x98\x80=\xb8y\xb9\xe5\x1c\xca\x89Z\x11%`\x0f\xc4`\x08\xd1?\xa8\xf9\xb8\xe6\xe8\xb6\xa3v\xab}R\xff*pA`\xf4\xaa\xe8\x90\xa4\x10M\x90F\x13\xa4\xf1\n\xf4b\x18f\xa8k\xc8\xd4i2u\x9a:*;\x1aN4t]\xea\x9a\xd4\xdf\x94+\xe5YyY\xf1\xb9\xf1\x93\xfaWR\x84!D\x7fw~\xe7\xf93/\x9fq\xbc>`^@\xcaS)1\xabc\xb4\xa1Z\xce\xe2\xc1\xf6\xc1\xfa\xe3\xf5\xe5\xbb\xca\xbb\xaft;\xfe\x12\x0f\xff\xfe\xe1E/-r\xbc^\x8a0\x84\xe8\xaf.\xbew\xb1p{\xa1\x83\xc5\xfa\xf9\xfa\xc5;\x16\xcf[7O&\x9f\xdc\x99L\xd6\xc6~w\xe8\xbb\x92WK\x0c\xb5\x06\x07\xff\xc9\xaa\xf7V%?\x99<\xa9W\x91\x16\x0c!b\x18\x86\xb9\x92\x7f\xe5\xc0\xfa\x03\x8c\x03\xc7\x82J\xabZ\xf9\xee\xca\xf8\xdc\xf8\xc9\xc6\xefN\xac\x9d\xad\xd9SS\xf8\xabB\xcb\xa0\x85\xbbZ\xc6\xe4\x1c\xca\x99\x9b=w\xca/'r\x18B\xc4\xb4\x9eo\xdd\x93\xb9\xc7f\xe6\xfe1\xf0\x9e\xd4{\xd6~\xba\xd6o\x96\x9fS^\xb7\xf7Fo\xfe\xa6\xfc\xef\xcb\xbf\xe7\xacT\xba+s\x8br\xc3\xd2\xc3\x9c\xf2\xbab\x83!tu\xddW\xba\xf3\xd2\xf3\x1c\xb9\x1c4cG\xc6\xe2W\x16\xcb\x95r'\xbe\xba\xddj?\xf7\xbbs%\xaf\x96pV\xba\xfb\xb9o-\xdb\x1a07\xc0\x89\xaf.\x12\x18B\x976\xdc=\xfcA\xd2\x07\xfd-\xfd\x1cu2&\xeb\xc3\xac\x84\xad\t<\xb5Q\xf5Q\xd5\xb1\xc7\x8fqN\x86}\xc2}\x1e\xaf|\xdc3\xc0\x93\xa76\x84\xe2\xccO5$1,S\xb0\xa5\x803\x81r\xa5|\xfd\xbe\xf5\xfc%\x90a\x98\xc4m\x89\xeb\xf7\xad\xe7\x1cc\xfb[\xfa\x8fn=\xea\xc8\x17Wi\xc1\x10\xba\xae\x8a\xf7+\xea\x8f\xd5\xc35\n\xb5b\xc3\x91\r\xb19\xb1|7\x13\x9b\x13\xbb\xe1\xc8\x06\xce;}\xaf\x1d\xbdV\xf9\xe7J\xbe\x9b!\x0cC\xe8\xa2\x0c\xb5\x86S\xcf\x9e\xe2,\xcb\xde\x93\x1d\xbd:\x9a@?\x0c\xc3D\xaf\x8e\xce\xfe8\x9b\xb3\xec\xe43'\x1d\xffyC\x120\x84\xae\xc8:b=\xb8\xe1\xa0u\xd4\n\x97-\xf9\xed\x92\xd8\x9f\xf1>\x06\xde)6'v\xc9o\x96\xc05\xd6Q\xeb\xa1\x8d\x87\xac#\x1c\xcdK\x08\x86\xd0\x15\x9dz\xfe\xd4\xad\xba[pM\xdc\xc6\xb8\xc5;\x16\x93\xe9\xe7N\x8b_Y\x1c\xb7!\x0e\xae1\xd4\x1aN\xbfp\x9aL?\x04`\x08]N\xfb\xd7\xed\x15\x7f\xac\x80kB\x92C\xd6\xe4\xada\x04\xb9\xadO\xc6\xac\xd9\xbd&$9\x04\xae\xba\xf8\xde\xc5\xf6\x8b\xedd:\xe2\x1b\x86\xd0\xb5\xb0v\xf6\xc4\xf6\x13p\x8d\x9b\xa7\xdb\xba\xcf\xd6)=\x94dZ\xba\x9b\xd2C\xb9n\xef:7O7\xb8\xacp{!k\xa7\xe1T)\x86\xd0\xb5\xd4\xec\xa9\xe9\xa8\xe8\x80k\x96\xbd\xb9L7[G\xa6\x9f\x89\xe8\xa2u\xcb\xdeX\x06\xd7\xb4_l\xbf\xf4\xc9%2\xfd\xf0\nC\xe8B\xcc\x03\xe6\xa2\x97\x8a\xe0\x9aY\x99\xb3\x92~\x91D\xa6\x1fX\xd2\x13I\x91\x0fG\xc25E/\x15\xf1\xb1\xf6\x14a\x18B\x17R\xf2j\xc9P\xd7\x10P\xa0\xf6V\xaf\xd9\xbdf:Wf;\x91L.[\xb3{\x8d\xda[\r\xd4\x98:M%\xafq_\xf2&r\x18BWal0\x96\xff\xa1\x1c\xae\xc9|=\xd3;\xcc\x9bL?\x8e\xf0\x99\xe9\x93\xf9z&\\S\xbe\xab\xdc\xd8`$\xd3\x0fO0\x84\xae\xa2\xe4\xb5\x12\xfb\x18t\xbf|\xe0\x82\xc0\xfb\x1f\xbb\x9fX?\x0eJ\xdc\x96\xa8\x9f\x0f\xad\x83h\x1f\xb3\x97\xfc\xb7\xb4\x07C\x0c\xa1K\xe8k\xee\xbb\xb4\x97\xe3\x1c\xc6#\xbb\x1e\x11\xe1Z\x83r\xa5\xfc\x91]\x8f\xc05\x97>\xbd\xd4\xd7\xdcG\xa6\x1f>`\x08]B\xe9\x1b\xa5\xac\r:\x9b?\xf7\xa7s#\x96F\x10\xeaf\x92\"\x1f\x8a\x9c\xb3f\x0eP\xc0\xda\xd8\xb27\xcb\x88\xf5\xe3t\x18B\xfa\x99n\x9a\xaawW\x03\x05\n\x95b\xf9[\xcb\x89\xf53\x05\xcb\xdfZ.w\x83\x8e\xd5\xaa\xbc*S\xa7\x89X?\xce\x85!\xa4\xdf\x85w.\xc0w\xcd'\xff2\xd9/\xca97\xcb\xf3D7[\xb7\xf0\xc9\x85@\x81\xcdl\xbb\xf0\xce\x05b\xfd8\x17\x86\x90r#=#\x15\xefC\x17\xa9)T\x8a\xb4\xe7\xd3\x88\xf53ei\xcf\xa7\xc1O\x8c\xa9|\xbfr\xc48B\xac\x1f'\xc2\x10R\xaezw5\xbc\x8co\xc2\x96\x04m\x08\xf7\x82\x85\x82\xd3\x86h\xef\xfb\xb7\xfb\x80\x02\x8b\xc9R\x9d\x07\xcd\xbaE\x0bCH5\x96\xa9\xfa\xa8\n\xd8.S\xc8\xd2_H'\xd6\xce4-zq\x11|\xfe\xb6*\xafJ\x8a\xf7\xddc\x08i\xd6z\xbe\xb5\xa7\xbe\x07(X\xb0i\x81\x84\x1e\xbd\xe2\x1b\xe9;\xff\xe7\xf3\x81\x82\x9ek=\xad\xa5\xad\xc4\xfaq\x16\x0c!\xcd\xe0a\x90\x911\x8b^\x96\xd8\xe2\xd6\x0f\xbe\xfc |\x83\x15\xc7.\x8b\x12\x86\x90Z\xa3}\xa3u\xffW\x07\x14\xc4\xac\x8e\x91\xdc\n\x82\x01\xf3\x02bV\xc7\x00\x05u\x07\xea\xcc\xfd\x12\xbb\xa4\x1bCH\xad\xda}\xb5\xf0\x1a\x10\xf7?.\xba\x8b\xd4\x1c\x91\xf8X\"\xb0\xd5:b\xbd\xbc\xef2\xb1f\x9c\x02CH-xb\xa6\r\xd1\xce^9\x9bX3N\x14\xbd*\x1a>\x9d[\xf5\xa1\xc4f\xa4\x18B:\xf5\\\xeb\xb9Yu\x13(H\xd8\x92\xe0\xdc\xb5\xb4\x89\x91+\xe5\xf0o\x157\xabn\xc2\xa7\xa3\xc4F\x92\xff\r\x88\xd3\x95\xfc+\xd0f\x19\xc3\xebb\xbe|K\xdc\n\xcdH\x19\xce\xdd\x17\x19\x0c!\x9d\xe0\xa30jY\x94o\x84d~\x99\xb8\x9bo\xa4\xef\xace\xb3\x80\x02\x0c!\x12X\x7fk\x7fG%\xb4\x90L\xc2\x16\t\x0f\x83\xb7\xc1\x83aGEG\x7f+\xd7\x036D\x03CH\xa1\xab\x87\xaf\x02[\x95\xeeJb\x8bj\xf3'zu4\xbcf\xfe\xd5#\xd0\x9b *\x18B\nq\xccEWD\xa94*b\xcd\xf0D\xa5Q\xcd^\x01\x9d\xdd\x95\xd0\x8c\x14CH\x9b\xa1\xae\xa1\x96\xafZ\x80\x82yk\xe7\x11k\x86W\xf0\x8e\xb4~\xd5:d\x80V\xb5\x12\x0f\x0c!m\x1a\n\x1b\x80\x8b\x98e\nY\xcc\xa3\xd0\x15'\x12\x12\xf3\x93\x18\xe0zn\xd6\xce6\x9ch \xd9\xcf\x94a\x08i\xd3\xf4\x97&`k\xe4\xd2H\x0f\x9d\x07\xb1fx\xe5\xa1\xf3\x88X\x12\x01\x144\x177\x13jez0\x84ta\x99\xe6\xb3\xcd\xc0vj\xe6\xa2\xb7\xc1\xbb\xd3|\xb6Y\x12w6a\x08\xa9\xd2{\xa3w\xa0m\x00(\xa0f.z\xdb\x9c\x9f@\x0b@\xf5\xb7\xf6\xf76\xf5\x12kf\xca0\x84Ti*\x86\xe6\xa2\xba\xd9:Q\xad\xed;}\xdea\xde\xf0\xea8\x92\x98\x91b\x08\xa9\x02\xcfEE\xbb\xa8\xe1tD.\x85\x9eW\x01\xbf!\"\x81!\xa4\x08\xcb\xf1\xc1\x0f\x1f\xaf\x12\x05\x7f\xb24\x157\x89\xffk!\x86\x90\x1e\xc6F\xe3`\xc7 P\x00\x9fK\x94(\xf8\x93e\xb0}\xd0x]\xecO\xaa\xc0\x10\xd2\xa3\xad\xac\r\xd8\x1a07@\x13\xac!\xd6\x0c1\x9a`\x8d\xff\x1c\x7f\xa0\xa0\xad\x14z[\xc4\x00CH\x0f\xf8\x06B*\xbf\x10\xde\x06\x0f\x867\xab\xa1\xb7E\x0c0\x84\xf4\x80C\x18\x9e\x11N\xac\x13\xc2\xe0]\x83\xdf\x161\xc0\x10R\x82\xb5\xb3\x9d\xdfv\x02\x05\xc1\x89\xc1\xc4\x9a!\x0c\xde\xb5\xce\xeaN\x91?\xda\x1eCH\tc\xa3\xd1b\xb2L\xb4U\xa5Q\t\xfe\x18z\xfe\xe8\xa2un^n\x13m\xb5\x98,\xbd\xd7E\xfd\x93=\x86\x90\x12\xf0\xa4+0>P$\x0f\xc1\xe6\x83L.\x0b\x8a\x0f\x02\nD>#\xc5\x10R\x02>\xce\x82\x13\xa8\x9d\x8b\xde\x16\x94\x80!DB\x83\x8f3\xf8\x18\xa5\x00\xfc)\x83!D$t]\xea\x02\xb6\xba\xf8H\x08\xbf9\x82\xc3\x10\xd2\xc02h\x19\xbe5<\xd1V\xb9R>\xe3\xde\x19$\xfb!O\x1f\xab\x07\x96Q\x1d2\x0cY\x06'<k%8\x0c!\r\xe0+\xb3\xfc\xa2\xfc\xe05\x91(\xa0P+\xfcfA\xb7S\xf4\xde\x10\xef\tR\x0c!\r\xe0S\xf0\xba(j\x7f\x9c\xb8\x13|O\x93\x98\xaf \xc5\x10\xd2\x00\xfe\x98\x87\x87\x08j\xe0H\x88\x84\xc49\x1d%\xd6\x89\x80\xe0\x01_\xcc\xbf\xd7c\x08i\x00\x1fa8\x1228\x1dE|\x83\x8f0\xfcN\xc8\xe0H\x88xe\xb7\xda\xe1\xe7.H\xe8\xa9\xf4\xd3\xe1\x17\t\x85\xb0\xaf\xa5\xcfn\xb5\x13kfR0\x84\x927|k\x98\xb5Mx\x97\x80&H\xe3\xe69\xe1\xc5\xcd4q\xf3r\xd3\x04Mx\xd72kc\x87\xbb'\xfc)UX\x18B\xc9\x1b\xba\x05-\xf6\x0e?\xd4\x962\xf0\xd2\x01\xc0\xf5\x0c\xc2\xc2\x10J\x1e|ly\x06x\x12\xebDp\xf0\xce\xc2\x9fV\x02\xc2\x10J\x1e|la\x08\xc7\xe1H\x88\xf8\x82#\xe18\x1c\t\x910p$\x1c\x87#!\x12\x06\x8e\x84\xe3p$D\xc2\xc0\x91p\x1c\x8e\x84H\x18#=#\xc0V\x0f\x7fJ\x9eF\xe8\x08\x8e\x10\xf6`\x08\x11?\xc6F\xc6\x80\xadj\xad\x9aX'\x82\x83w\xd6:b%\xd6\xc9\xa4`\x08%\xcff\xb6\x01[\xa9\xbf\x9d\xf7N\n\x15\xb4\xb3V3\x86\x10\xf1\x03>\xb6\x94j%\xb1N\x04\x07\x7f\xe2\xc0\x9fV\x02\xc2\x10J\x1e\xc7H\x08\x0e\x0e\x94\xc1\x91\x10\t\x03>\xb6\\j:\n\x0f\xfb8\x12\"\xbeXG\xc1\x10\xe2H\xf87\xf0\x1b% \x0c\xa1\xe4\xc1\x1f\xf0\xf8\x9dp\x1cNG\x11_p::\x0e\xa7\xa3H\x18\xf61\xe8\x86q`I\\\xfa\xc8\xdd\xa0\x9d\xb5\x8da\x08\x11?\xe0#O\xb4k:\xf0\x01\xfe<R\xb8\x89tR\x80!\x94<\x89\xce\xc1\xf8 \xd1\x999\x86P\xf2$z6\x82\x0f\x12=G\x85!\x94<\xa5;8\x12Z\\h$\x84w\x16~\xa3\x04\x84!\x94<\x9c\x8e\x8e\xc3\xe9(\x12\x06\xc7\x05\x938\x12\xfe\rNG\x11_\xe0c\x0b\xbf\x13\x8e\xc3\x91\x10\xf1E\xa2\xb7\x0e\xf0\x01GB$\x0c7\x0fh\x81m\xf3\xa0\x99X'\x82\x83wV\xe9\x81!D\xfc\x80\x17\xb0\x80\x17\xbf\xa0\x0c\xbc\xd0\xbd\xa7\xbfH\x97\xdb\xc1\x10J\x9e\xd7\x0c/`\xabh\x1f\xc0\xc0\x07\x8e\x10\xce\xc0\x10\"~\xc0\xc7\x16\x86p\x1c\xfci% \x0c\xa1\xe4\xe1H8\x0eGB$\x0c\x1c\t\xc7\xe1H\x88\x84\x81#\xe18\x1c\t\x910p$\x1c\x87#!\x12\x06|l\rv\x0c\x12\xebDp\xa6\x9b&`+\x8e\x84\x88/\x9e3<e\n\xd9D[M\x9d\xa6\xb1ah\x89nj\x8c\r\x8d\x99:'\x0c\xa1L!\x13\xedc90\x84\x92'W\xca}f\xfa\x00\x05}M}\xc4\x9a\x11PoS/\xb0\xd57\xdcW\xb4+}\x88\xb4-4)\xba(\x1d\xb0\xd5x\xddH\xac\x13\x01\xf5^\x87B\xe8\x17\xe5G\xac\x93\xc9\xc2\x10\xd2\x00>\xc2zo@G'5\xe0\xdd\x84?\xa7\x84\x85!\xa4\x01|\x84\xc1C\x045\xe0\x01\x1fGB\xc4/\xbfY8\x12r\xec&\xfc\x16\t\x0bCH\x03\xf8c\x1e\xbf\x1328\x1dE|\xe3\x9c\x8eR\x7fk\xaf\xcdl\xc3\x91\x10\tI\xa5U\x01\xbfD\xdb\xad\xf6[\xdf\xdd\"\xd9\x0fy\x86:\x03\xb0\xcc\xb1\x97\xdeK\xa5U\x91\xecgR0\x84\x94\x08\\\x10\x08l\xbdY}\x93X'\x82\xe8\xac\xee\x04\xb6\xc2o\x8e\xe00\x84\x94\x08N\x0c\x06\xb6\xc2\xc7(\x05\xe0O\x19\xf8\xcd\x11\x1c\x86\x90\x12\xf0q\xe6\xe2#!\x86\x10\x91\x00\x1fg]5]\xac\x9d%\xd6\x0ca\xac\x8d\xed\xac\xc1\x10\"\xa1\xe9f\xebT\x9a\t\xcf=XL\x16c#\xb5?T\x18\x1b\x8dcC\x13^\xa4\xae\xd2\xaa\xc4\xfcK=\x83!\xa4\x86L.\x0b\xba/\x08(\xb8YE\xed\x8c\x14\xde\xb5\xa0\xfb\x82d\xf2\t\xef2\x11\x03\x0c!=\xe0IWKI\x0b\xb1N\x08\x83wM\xe4sQ\x06CH\x13\xf8hk.n&\xd5\x08iM\xc5M\xc0\xd6\xe0\x04\x0c!\"%,-\x0c\xd8\xda}\xb5\x1b\xbe\xf1\\\xa2\x06;\x06{\xae\xf5\x00\x05a\xe9\xd0\xdb\"\x06\x18Bz\xe8f\xeb\xb4!Z\xa0\xa0\xf9l3\xa9^\xc8\x81wJ\x1b\xaa\x15\xf3U\xa3\xb7a\x08)\"c\"\x96F\x00\xdb\xe1i\x9bD\xc1\xd3\xec\xc8\xa5\x91\x8c\xa8O\xca0\x0c\x86\x902\x11K\"\x80\xadT~-\x84?Y\xe07D$0\x84T\x89\\\x1a\tl56\x1a\x07\xda\x06\x885C\xc0@\xdb\x00|\x07\x13<5\x10\t\x0c!U\xfcf\xf9y\x87y\x03\x05\xf5_\xd4\x13k\x86\x80k\xc7\xae\x01[}f\xfa\xf8E\x8a\xfag\xfa\xdb0\x84t\x91qL\xc0\xae\xe4_!\xd5\n\t\xf0\xeeD,\x89\x10\xff\x17B\x06CH\x9f\xc8\x87\xa0\x19iSq\xd3\x88\x91\x92'\x16\x8e\x18G\xe0S\xa3\x92\x98\x8b2\x18B\xfaD\xaf\x8a\x06>\xfeY\x1bK\xcd\x8c\xb4\xfeX=k\x9b\xf0\xaat\x99\\\x16\xbd*\x9ad?S\x86!\xa4\x8d\x97\xde+\xfc\xc1p\xa0\x80\x9a\x19)\xbc#3\x1f\x9c\xe9\xa5\x17\xe9\xc3'~\x00CH\xa1yk\xe7\x01[\xaf\x9f\xbcn1Y\x885\xc3\x13\x8b\xc9\xd2x\xb2\x11(\x80\xdf\x04Q\xc1\x10Rhn\xf6\\`\xabu\xd4\xdap\xbc\x81X3<i8\xde\x00\xaf^5/\x1bC\x88\x84\xe33\xd3'$)\x04(\xa8\xde]M\xac\x19\x9eT\xe5U\x01[C\x92C\xe0\x9fjD\x05CH'\x8e\x19\xe9\xe9\xeb}\xcd\x12~JL_S\xdf\x8d\xd37\x80\x02\t\xcdE\x19\x0c!\xad8\x8eB\x96\xa9\xce\x93\xf0`\x08\x0f\x83\x0c\x86\x10\x89\x81\xff\x1c\x7f\xf8\xf6\xc2\xea\xdd\xd5\xc0B\x9dbf\xb7\xda\xbf\xfd\xdfo\x81\x82\xe0\xc4`\xff\x18\x7fb\xfdL\x1f\x86\x90Z\x89\xdb\x12\x81\xad\x83\x1d\x83\x8d\x85\xd0\xd9E\xd1j8\xd1\x00?~8\xf11h\xc7E\x08CH\xad\xb8\x8dqJ\x0f%P\xf0\xcd\x07\xdf\x10k\xc6\x89\xaa>\x84\xe6\xa2J\x0f\xe5\xfc\x8d\xf3\x895\xe3\x14\x18Bj\xb9\xfb\xba\xc7\xfeS,PP\x7f\xbc\xbe\xfbJ7\xb1~\x9c\xa2\xfbJw\xfdq\xe8\x8a\x9f\xd8\x9f\xc5\xaa}\xd4\xc4\xfaq\n\x0c!\xcd\xe0\x19)\xc32\xe7w\x9e'\xd5\x8bs|\xf5\xfb\xaf\x18p\xfdT\x8e]\x16%\x0c!\xcdf.\x9a\t\x9f\xa2\xb8\xb4\xf7\x92\x84\x9eh\xdf{\xa3\xf7\xf2g\x97\x81\x02\xff9\xfe3\xd3g\x12\xeb\xc7Y0\x84T\x93q\x8c\x0c\xac\x8d-}\xa3\x94X;\xd3T\xfaF)p\xc56\xc30\x89[\x13%q\xef\xd2\x0f`\x08)\x97\xb0%\xc1\xcd\xcb\r(\xa8\xde]\r\x9fl\x14\x89\xc1\xf6A\xf8\x97\t\x95F\x95\xb05\x81X?N\x84!\xa4\x9c\x87\xbfG\xf2\x13\xc9@\x81\xcdb+{\xb3\x8cX?SV\xf6V\x99\xcd\x02],\x9a\xf4D\x92\x87\xce\x83X?N\x84!\xa4_\xea3\xa9\n\xb5\x02(\xa8\xf8S\x05\xbcR\x8b\xe0\x8c\x8d\xc6\x8b\x7f\xbc\x08\x14(\xd4\x8a\xd4gR\x89\xf5\xe3\\\x18B\xfai\x825\t[\xa0y\x9a\xcdb;\xf5\xdc)b\xfdL\xc1\xa9\xe7N\xd9\xc7\xa0\xeb{\x12\xb7&j\x824\xc4\xfaq.\x0c\xa1KH\x7f!]\xa6\x80NY\\=r\xb5\xe9/\"]\x95\xb4\xe9L\xd3\xb5\x02hA'\xb9R\x9e\xfeB:\xb1~\x9c\x0eC\xe8\x12|#|\x17lZ\x00\xd7\x9c|\xfa$|\xeeQ\x10v\xab\xfd\xcb\xa7\xbf\x84k\xe6o\x9a\xef\x13\xeeC\xa6\x1f>`\x08]E\xc6\xaf3\xe4n\xd0\x7fw\xd7\xa5\xaeo>\x14\xdd\x85lU\x1fU\x19.\x1b\x80\x02\xb9\x9b<\xe3?3\x88\xf5\xc3\x07\x0c\xa1\xab\xd0E\xebR\xfe#\x05\xae)z\xb1HT\xab\x03\xf7\xb7\xf6\x17\xbdX\x04\xd7\xa4<\x95\xa2\x8b\x16\xfb\xd3&`\x18B\x17\x92\xb1#\xc3+\x10Z\xfb\xc8<`.\xd8R \x92\x07k\xb3v\xb6`K\x81y\xc0\x0c\xd4h\x824\x19\xbf\x96\xf60\xc8`\x08]\x8a\xda[\x9d\xb93\x13\xae\xb9Qt\xa3\xf2\xcf\x95d\xfa\x81U\xbe_\xd9t\x86\xe3\\Q\xe6\xceL\xb5\xb7\xc4.\xd7\xbe\x1b\x86\xd0\xb5\xc4\xe7\xc6\x87.\x0c\x85kN?\x7fZ\xf0\x07\xdc\x1b\x1b\x8c\xa7\x9e\xe7\xf8\xd5$ta\xe8\x82\x7f\xe68\xdb$\t\x18B\xd7\"\x93\xcbV\xbe\xbb\x12\xae\x19\x1b\x1e;\xf4\xf3C\xd6\x11+\x99\x96\xeef\x1d\xb1\x1e\xda\xc4\xdd\xc0\xca\xffY)\xf2\x87\xd1;\x08C\xe8rB\x1f\x08M~\x12\xba\x90\x8da\x98\x8e\x8a\x8e\x82\xad\x05\xf0MC|a\x99\x82-\x05\x1d\x15\x1dp\xd5\xc2\x7f_\xc89\xa4K\x05\x86\xd0\x15-\x7fs\xb9>N\x0f\xd7\xd4\xee\xab=\xf7\xea92\xfd\xdc\xe9\xdc\xef\xce\xd5~^\x0b\xd7\xe8\xe3\xf4\xcb\xdeXF\xa6\x1f\x020\x84\xaeH\xe9\xa1\\\xb7o\x9d\xd2\x1dZ\xfc\x82a\x98\xb3\xffu\xb6n\x7f\x1d\x99\x96n\xab\xfd\xbc\xf6\xeco\xce\xc25Jw\xe5\xfa\xcf\xd7\xc3+wH\x0b\x86\xd0E\xe9\xe3\xf4\xcb\xdf^\xceYv\xf8_\x0e\x13[\xae\xbb\xfe\x8b\xfa#\xffz\x84\xb3l\xc5;+f\xc4\xce \xd0\x0f1\x18B\xd7\x95\xfcD\xf2\x9c\xac9p\x8d\xcdl\xfb\xfc\xa7\x9f\x13\x18\x0f\xeb\xf6\xd7\xed\xcf\xde\x0f\xafl\xcf0\xcc\x9c5s\x92~\x91\xc4w3\x84a\x08]\x98\x8c\xc9\xca\xcb\xe2\xbc\xea\xd2n\xb5\x1f\xdcx\x90\xd7\xc5\x82\xab>\xaa:\xb8\xf1 \xe7:\xa8>\xe1>Y\x1feI\xf1\xdey\x18\x86\xd0\xa5y\x06xn.\xdc\xec\xee\xe7\xceQ\xc72G\xb7\x1d-\xdeQ\xec\xf4\xf5\x82\xedV{\xf1\x8e\xe2c\x8f\x1d\xe3<\x13\xeb\xa1\xf3\xd8\xfc\xe5f\xcf\x00O\xe76 \x062\x96\x15\xc55JH@m\xa5m{2\xf7XG\xb9\x7f\x18\xbc'\xe5\x9e\xb5{\xd7\xfa\xcdr\xce\x83\xe0{\xaf\xf7\xe6o\xce\xff\xbe\xfc{\xceJ\xa5\xbb2\xb7(7,=\xcc)\xaf+6\x18B\xc40\x0cs\xf5\xf0\xd5\xfd\xeb\xf6;\xf2\xc3\xa0J\xabZ\xf9\xee\xca\xf8\xdc\xf8\xe9\xfcP\xce\xda\xd9\x9a=5\x85\xdb\x0b\x1dzR\xa2\x8c\xc99\x94\x03?\xefM\xd20\x84\xe8\xaf.\xbew\xb1p{\xa1\x83\xc5\xfa8}\xc6\x8e\x8c{\xd7\xdd\x0b\xdf+|7\xd6\xc6~w\xf0\xbb\x92\xd7J\x0c\xb5\xd0\rJwZ\xf5\xde*\xce\xab\x0b$\rC\x88\xfe\xee\xfc\xce\xf3g^>\xe3x}\xc0\xdc\x80\x94\xa7Rb\x1e\x8d\xd1\x86j9\x8b\x07\xbe\x1fh8\xdeP\xbe\xab\xbc\xfb\xea$\x96\xfd\xce\xdc\x99\x99\xfe\xa2\x84\xef\x9aw\x04\x86\x10\xfd\x83\x9a\x8fk\x8en;:\xd9\x130\xfa\xf9\xfa\xe8U\xd1\xa1\xc9\xa1^\x81^\x9a \xcd\xed\xe5^L\x9d&S\xa7i\xa8k\xa8\xbd\xa2\xbd\xe1D\x03|o\xee\xdd\xe4JyV^V|n\xfc\xa4\xfe\x95\x14a\x08\xd1\x0f5~\xd9x`\xfd\x81\xb1\xa11\x01{p\xf3r\xcb9\x94\x13\xb5\"J\xc0\x1e\x88\xc1\x10\xa2\x1f\xd1Q\xd9\xf1\xd9\xea\xcf\x86\x0cC\x82\xbc\xba\x97\xdek\xd3\x89M\xc1\xf7C\xcfW\xa4\t\x86\x10\xfd\xb8\xbe\xa6\xbe\xfc\xcd\xf9mem\x84_7,=l\xed'k}#}\t\xbf\xae\x800\x84hB\xac\x8d-{\xbb\xacxG1\xbc\xf4\xb5\xb3(T\x8a\x87^{(\xf5\x99\xd4\xc9\x9eq\x95:\x0c!\xe2`\xb8l8\x9c{\xb8\xf3\xdbN^_%(!({O6\xe7\rVT\xc2\x10\"n6\x8b\xad\xf4\xf5\xd2\xb2\xb7\xca\xe0e\x97\xa6F\xed\xadN{.-\xfd\xc5t\x85\nZ\xab\x9fb\x18B\xe4\xa8\xd1\xbe\xd1\xaf\xdf\xfd\xba|W\xf9h\xef\xa8S\xfe\xa0\xbb\x9f{\xea\xd3\xa9\x0b\xb7/t\xf7\xe5\xbax\x95j\x18B49\xe6\x01s\xe5\xfb\x95eo\x97\r\xdf\x1a\x9e\xf2\x1f\xf1\x9c\xe1\x99\xf6lZ\xf2/\x93UZ\x95\x13{\x93(\x0c!\x9a\n\x9b\xd9v\xfd\xd4\xf5\xda\xfd\xb5\xf5_\xd4\x9b\xfb\x1d\x9d\xa3\xaa}\xd41\x8f\xc6\xc4m\x88\x8bZ\x1e\xe5\xb2\x93\xcf\xbba\x08\xd1\xb4\xb06\xb6\xebrWKI\x8b\xa1\xd6\xd0S\xdf\xd3\xd7\xdcg\x19\xb4\x98\x07\xcd\x0c\xc3\xa8\xb5j\x95V\xe5\x1b\xe1\xeb\x1f\xe3\xaf\x8f\xd3\x87g\x84\x07\xce\x0ft\xb53\x9f\x8e\xc0\x10\"$0\xbc\xa9\x17!\x81a\x08\x11\x12\x18\x86\x10!\x81a\x08\x11\x12\x18\x86\x10!\x81a\x08\x11\x12\x18\x86\x10!\x81a\x08\x11\x12\x18\x86\x10!\x81a\x08\x11\x12\x18\x86\x10!\x81a\x08\x11\x12\x18\x86\x10!\x81a\x08\x11\x12\x18\x86\x10!\x81a\x08\x11\x12\x18\x86\x10!\x81a\x08\x11\x12\xd8\xff\x03\x00\xe3\x8aa\xa6\xd7\xf3\x84\x00\x00\x00\x00IEND\xaeB`\x82",
#         ),
#         (
#             {
#                 "id": 1,
#                 "x": 0.5,
#                 "y": 0.3,
#                 "section": 2859,
#                 "classtype": "AnnotationText",
#                 "text": "blabla",
#                 "styleId": 9750,
#                 "family": "",
#                 "underline": False,
#                 "pointSize": 10.0,
#                 "strikeout": False,
#                 "weight": None,
#                 "bgColor": QColor("red"),
#                 "fgColor": QColor("yellow"),
#             },
#             b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x01,\x00\x00\x00\xc8\x08\x02\x00\x00\x00\xdd\xbdK\x02\x00\x00\x00\tpHYs\x00\x00\x0e\xc4\x00\x00\x0e\xc4\x01\x95+\x0e\x1b\x00\x00\x05\x83IDATx\x9c\xed\xdcK\x88\x9dw\x1d\xc6\xf1g2\x93\xdb\xb4\xb9\x193\xe62\xb5\x816\xa4j1b\xd3\x94F!\xb4%\xa0(x\xa1.\x04A\x10Dp!\x88\xe26\xedVD\xc1\x85 \x82\xe0B\x10)^@Q\x8c\xb6*\x9a\x92\x1a\xa5\xc1jm\x9b\xa2\xa9\x93\xb4I\xda\\\x99db2\x197#1r\xa2\t\t<v\xe6\xf3Y\x1d\xce\xfb\x9b\x1f\xef\xe6\xcb\xff\xbcg\x86\x19\x9a\x99\x99\t\xd0\xb3\xa0}\x030\xdf\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e#\xed\x1b\xe0\x86=\xfah\xfb\x0e\xae\xdf\xae]\xed;\xf8?\xe2$\x842\x11B\x99\x08\xa1L\x84P&B(\x13\xe1\x9c0v4\xbb\x1e\xc9\xc3\x8f\xfd\x8f\xb1\xcf\x7f)_\xf8\xe2\xf5m\xde\xf6Tv=\x92\xad\xfbn\xfef\xfeE\x84P&B(\x13!\x94\xf9\x8b\x99\xb9e\xd5\x89<\xf0x\xeex1\x8b\xfe\x91cc\xf9\xe5\x8e<\xbf\xf9\xbf\r\xef\xfcY\xd6\x1c\xcb\xad\x93Y|>S\x8bsdm~wo\xfe\xfc\xd6\x01\xc3\x1b\xff\x9a\x1d\xbf\xce\xfa\xc3\xc9L\x0en\xcc\xee\x9d9\xb6\xe6\xe6l\x9e\xf7\x9c\x84s\xc8\x9b_\xca\xa7\xbf\x96M\x07rlMN/\xcf\xba\xc3\xf9\xe8wr\xd7\xb3W\x9d_q*oy6I\x0e\xde\x9e\xa7\xb7\xe4\xd0\x86\x8c\xff=\x1f\xf9\xee\x80\xafa\xee\xdf\x93\x8f\x7f+\xab\x8e\xe7\xe5\xb5\xb9\xb0(\x9b\x9e\xcf\'\xbe\x99\x95\'n\xc2f\x9c\x84s\xca\xc2\x0b\xd9\xbd3\xfb\xee\xc9\xa5\xe1$\xd9\xb2?\x1f\xfc~\xde\xfb\xd3<wWf\x86\x06\xcc\x1fyS\xbe\xf2\xd9\x9c^q\xf9\x9d\xb1#\xf9\xd4\xd7\xf3\xee\xdfd\xdf\xd6+&/\r\xe7\xdb\x1f\xcb\x81;\x93d\xe8R\xde\xff\xa3\xbc\xf3\x0fy\xf0\x89|\xef\xc3\x83\xef\xe4\xda7\xe3$\x9cS^\xbc#Om\x9b-0\xc9\xfe-94\x9e\xe5\xa7\xb2\xee\xf0\xe0\xf9sK\xaf\xe8d\xe4b&o\xcd\x897d\xc5\xc9\x0cO_1\xb9\xf7\xbe\xd9\x02\x93\xcc,\xc8\xee\x9d\xb98\x92\xcd\x7f\xc9\xd0\xcc\x8dn\xc6I8\xc7\x1d\xda\x90\r\x13y\xe3\xab9\xbca\xf0\xc0\xf8D\xee\xf9}n{)\xabNf\xc1\xbf\xe51<\x9d\xe9\xe1\xc1?\x92dji\x8e\xaf\xce\xd8\x91,;}El7\xbey^\x12\xe1\x9c69\x9a$\x0b/\x0c\xbez\xdf\xde\xbc\xe7\'\xb98\x92\x176\xe5\x8fo\xcf\x99e\x99Z\x9c\x07\x1f\xcf\xea\xd7\x9a\x9b\xe7\x1f\x11\xceiK\xa6\x92\xe4\xec\xe8\x80K\x8b\xce\xe7\xa1\x9fgjI\xbe\xf1\xc9\x1c_}\xf9\xfd\xedO\x967\xcf?\x9e\t\xe7\xb4\x8d\x7fK\x862q\xdb\x80K\xabNd\xe1\x85L\x8c_\xd1\xc95\x1a=\x9b\xb1\xa3ymu\xce\r\x8a\xf0F6\xcfK"\x9cC\x16\x9d\xcf\xd0\xa5\xd9\xd7C3\xd9\xf1\xab\xac{9\xcfm\xce\x99e\x03\x86\xcf\xde\x92$\xeb^\xc9\xe8\xe4\xec;\xc3\xd3\xd9\xfe\xdb\x8c\x1d\x190\xbc\xe4\xdc\xe5\xd7\x8b\xcf\xe7\x03?\xcc\xf0t\xf6\xdd;\xf86\xaek3>\x8e\xce)\x9b^\xc8\xe7\xbe\x9cC\xeb3=\x92\xb5\xafd\xd5\xf1\x9cZ\x99\x1f\xbfo\xf0\xf0\x99ey\xe6\xee\xdc\xfdL>\xf3\xd5L\x8c\'CY\x7f(#\x173=<\xe0I\xef\xa1_\xe4\x1d\xfbst,#\x17\xb3a"\xa3gs\xe0\xce\xec\xddv\x136#\xc29eb<g\x96g|"\xa3\x939\xb74\xfb\xb6\xe6\x89\x07f\xcf\xa5\x81~\xf0\xa1\xbc\xba&[\x9e\xce\xc6\x83\xb3\xe5\xecyW\x1e~,\x1b&\xfes\xf2Oo\xcb-\x93\xb9\xfd`\x16O\xe5\xe4\xca<\xb9={\xee\xcf\xcc\xd5?F]\xfbf\x92\xa1\x99\x99\xab\xfc\xaa\x87\xd7\x0b\xff\xe8\xe9u\xce3!\x94\x89\x10\xcaD\x08e"\x842_\xcc@\x99\x93\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xcaD\x08e"\x842\x11B\x99\x08\xa1L\x84P&B(\x13!\x94\x89\x10\xca\xfe\t\x80\x89:\xa0s\xd0C\xf6\x00\x00\x00\x00IEND\xaeB`\x82',
#         ),
#     ],
# )
# def test_draw_annotation(annot, res):
#     image = QImage(300, 200, QImage.Format_RGB32)
#     image.fill(QColor("white"))
#     painter = QPainter()
#     painter.begin(image)
#     if annot["classtype"] == "AnnotationText":
#         draw_annotation_text(annot, image, painter)
#     else:
#         draw_annotation_dessin(annot, image, painter)
#     painter.end()
#     buf = QBuffer()
#     buf.open(QBuffer.ReadWrite)
#     image.save(buf, "PNG")
#     buf.seek(0)
#     content = buf.readAll().data()
#     # a = PIL.Image.open(io.BytesIO(content))
#     # a.show()
#     # print(content)
#     assert hash(content) == hash(res)

#
# @db_session
# def test_createimages_with_annotation(resources, tmp_path, ddbr):
#     image = QImage(300, 200, QImage.Format_RGB32)
#     image.fill(QColor("white"))
#     orig = FILES / "bla.png"
#     if not orig.parent.is_dir():
#         orig.parent.mkdir(parents=True)
#     image.save(str(FILES / "bla.png"), "PNG")
#     f_section()
#     AnnotationText(
#         **{
#             "x": 0.5,
#             "y": 0.3,
#             "section": 1,
#             "classtype": "AnnotationText",
#             "text": "blabla",
#             "style": {
#                 "family": "",
#                 "underline": False,
#                 "pointSize": 10.0,
#                 "strikeout": False,
#                 "weight": None,
#                 "bgColor": QColor("red"),
#                 "fgColor": QColor("yellow"),
#             },
#         }
#     )
#     AnnotationDessin(
#         **{
#             "x": 0.5,
#             "y": 0.3,
#             "section": 1,
#             "classtype": "AnnotationDessin",
#             "width": 0.33,
#             "height": 1,
#             "tool": "ellipse",
#             "startX": 0,
#             "startY": 0,
#             "endX": 1,
#             "endY": 0.9,
#             "style": {
#                 "family": "",
#                 "underline": False,
#                 "pointSize": 10.0,
#                 "strikeout": False,
#                 "weight": None,
#                 "bgColor": QColor("red"),
#                 "fgColor": QColor("yellow"),
#             },
#         }
#     )
#     flush()
#     image_section = {
#         "path": "bla.png",
#         "annotations": [1, 2],
#     }
#     control = b'\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x01,\x00\x00\x00\xc8\x08\x02\x00\x00\x00\xdd\xbdK\x02\x00\x00\x00\tpHYs\x00\x00\x0e\xc4\x00\x00\x0e\xc4\x01\x95+\x0e\x1b\x00\x00\x0e\xa6IDATx\x9c\xed\xddi\x94\\e\x9d\xc7\xf1o\xf5\xdeIw\x16\x924Ig\xe9,\x1d\xc3\x92\x90\x98\x00\xb2\x0c\x84\x80\xb8\x04PA\x8e\x8cz\xce\x0c\xa2\xe8\xa0#g\x14\x9d\x81W\x8c:\xf3\x86q\x98\xe3r\xdcA\xe7x\xe6\xa0\xe7 \xa0\x08\x0c\x03&Q4H\x0c\x84Hb\x08\xe9,\x1d:\x1d:{\xd2\xdd\xe9%\xbd\xcc\x8b\xf4T\xccX\xf5\xbfU]]\xcfs\xefS\xbf\xcf\xbb\xf4\xf3\xe4\xde\xffs\xbb~\xfd\xdc\xaa[\xf7\xb9\xa9\xe1\xe1aD\xc4\x9f2\xdf\x05\x88\x94:\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc43\x85P\xc4\xb3\n\xdf\x05H\xc1\xbe\xf4%\x9f{O\rqn\x07M\xad4\x1c`\xcaa&\x1d\xa3\xba\x9f\xaa~\x80\xfe*\xfa\xaa86\x89\xc3S8\xd0@k\x13\x1d\xe72\\\x06p\xff\xfd>k\x8e\x19\x85PF\xa5|\x80\xe6\x9d\\\xb8\x85\xb7\xed\xa0\xba7s\x9f\x9a\x1ejz\x98x\x9c\xa6\xd6\x91\x9f\xf4\xd5\xf0\xc6B\xb6,\x86>\xa8vVl\xcc)\x84\x92\xa7\xea>.\xf9\x03\x97\xbf\xc8\xb8\xee\xfc\xffo/K^c\xc9k\xf0<|\x1e>\x03\xf5E(1a\x14B\xc9YM\x0f\xefx\x89\xcb^\xa2\xa6\xa7\xe0m\x1d\x84\xfb\xe0\x01\xf8\x07\xb8\x1b&\x8dAy\x89\xa5\x10J\x0e\xca\x07\xf9\xab\xdfr\xf9z\xaa\xfb\xc6t\xbbG\xe1~\xf8w\xb8\x07\xee\x85\xaa1\xddxb(\x84\x12\xa5\xa1\x83\x9b\x1fg\xfa[E\xdb\xc1\t\xb8\x1f\x1e\x87\x1f\xc3\xe2\xa2\xed%\xbe\x14\xc2 4\x1c\xe0\xaeo\xb1u1\x8f\xdeju\xfb\xc2W)\x1b\xe2\x81\x7f\xccu\xb3\xa9!n\xfb)\x8b\xb6\x17^`\x0e^\x85\x15\xf0\x15\xb8\x07\xca\x9d\xec1.t\x9dP\xb2\x98t\x94\x8f\xfd\xd0U\x02O\xeb\x87\x7f\x82\xaba\xb7\xc3\x9d\xfa\xa7\x10J&\x8d\xed\xdc\xf9\x03f\xbf\xe9c\xdf\xeb\xe12x\xd9\xc7\xae\xfdP\x08\xe5/4\xb7p\xfb\x8fFs\x05b\xcc\x1c\x80\x95\xf0\xac\xbf\x02\x9c\xd2{\xc2\xb0L>\xca\xaa5,\xd8IU?\x07\x1bX\xb7\x927\x16Y\x9d\xaf\xff\x1f\xa6\x1d\xa4\xae\x9b\xea>z\xab\xe9\x98\xce\xc1i\xac\xd8H\xd9P~\xfb\x1d*c\xa8\x9c\xc7n\xa6\xab\x8e\xae:*\x07\xb8\xf6W4\x1c`\xfcI*\xfb\x19,g\xa8l\xe4k4\xb9\xea\x86\x1b\xe1!\xf8\x9b\xfc*I \x850 s\xf6\xf2\xe9o1PAG\x03\xf5\x9d\xcch\xe7\xc3?\xe1\xa7\x1f\xe2\xf5\xf33\xf7\x9fx\x9c\xf3\xb7qh*\xadM\x9c\xac\xa5\xbe\x93\xf9\xbb\x98\x9b\xcf\xfb\xb1C\xd3\xf8\xfde\xbc\xb1\x90O}\x8f\xb2!\xb6]0\xf2\xf3\xb9{X\xb4\x9dCS\xd9=od\xcbs\xf7\x00\xbcv\x113\xf63\xf5`n[\x1f\x80\xbf\x85v\xb87\x8f\x92\x12H!\x0cH\xe5)\x9e\xbb\x9e\x8d+\x18*\x07X\xba\x99\x0f<\xce{\xff\x9b\xed\xe71\x9c\xca\xd0\xbf\xe3\\\xfe\xe3s\x9c\x988\xf2\xcfK7\xd0\xdc\x92\xc7\xee\xf66\xf1\xa3\xdbs\xda2\xd0\xd0\xc1\xa7\xbe\xcb\x9c\xbd|\xedn.\xd8\xc6\xad\xdb`Kn\xbb\xb9\x0f\xea\xe13y\x14\x964zO\x18\x90\x9d\x0b\xd8p\xe9H\x02\x81\xcdK\xd97\x8b\t\xc7\x99\xd1\x9e\xb9\x7fO\xed\x99\x9c\x9c\xbf\x8d\xf7>\x9d\xd3^\xfa\xabyz5\x03\x15L\xdf\x9f\xb5\xcf\x9fo\x19\xa8\x18\xa0\xbb\x8e\xa3\xe70\xf1\x18e\xc3l\xbd\x106\xc3\x0fs\xfe\xce\xdag\xe1\xf1\xdcz&\x92f\xc2\xa0\xed\x9b\xc9\xcc6\xa6\x1e\xa2}f\xe6\x0e\xb3\xdaX\xf12\xf3v1\xf1xN\x1bl\x9b\xcdc\xb7pt2\x17\xbfLC\x07\xf5\'\xce\n\xdb_ny\xf6^&\x1f\xa3l\xf0\xcc\xcf\xcb\x07\x19,\x872\xb8\x1d\xae\x86\x8f\xc2\xef\xa3\xf6:\x0c\x1f\x81\xe7\xe1\xca\x9c\x8aL\x1a\x850h\xdd\xe3\x00*Oen}\xc7K\xbc\xe7\x19\x06s\xbe2\xfe\x9b\x95\xfcz%Ce\xb9ny\xa0\x82\x1d\x0by\xed":\xeb\xe9\xad\xe6\xda5L9|v\xbf\xf9\xf0\x02|\x19\xbe\x12\xb5\xef^\xb8\t\xd6\xc3y\xb9V\x9b\x1c\na\xd0jz\x01N\x8e\xcb\xd0T\xd5\xc7u\xcf\xd3WM\x7f\x15\xf5\x9d\xd1\x9b\xfa\xc5\xfb\xd8\xb4<\x8f-\xf7\xd6\xf0\xfd;92\xe5\xcc\xcf\xafx1\xd3v+\xe0\xcb0\x07>\t\xc3f\x05G\xe1=\xb0\x11\xa6FW\x9b(zO\x18\xb4\xb9{ E\xdb\xec\x0cM\x93\x8fRy\x8a\x81\x8a\x9c\x12\xb8i\xf9Y\t\x1cw\x92\x86\x03\x1c\x9eBO\xa6\x10\x9e\xder\xdb\xac\xb3\x12\x18\xe1\x13\xf0H\x0eSB+|<*\xab\xc9\xa3\x10\x06\xa4\xaa\x8f\xd4\xff]\xdfK\r\xb3\xf2\xd7\xcc\xd8\xcf\xf6Etf\xfa\xfc\xe3\xe4x\x80\xf1QW\xe4O\x9f|\x1e\x99|\xe6\'\xd5}\xbc\xff\xe7\x94\x0f\xb2\xf1\x92\xcc\xff\xe5\xf4\x96g\xbcu\xe6r\x7f\xf9 W\xfc\x8e\x86\x0esO\xb7\xc1\x139\xdc\xe9\xfb\x0b\xf8NT\x9f\x84\xd1\xe9h@\x16\xee\xe0\x9e\x07\xd9\xd7\xc8`\x05\xd3\xdfb\xf2\x11\x8eO\xe2\xa9\x1b2w\xae\xeda8E*jV\xf9\xe3R\x96m\xe2\xba_\xb1l3\x07\x1a\xa8\x18`f\x1b\xe3N\xd2\xd2\xccK\x97f\xfe/\x9d\xf5lY\xcc\xe2-\xdc\xfdu\xdafA\x8a\xc6}T\x0c0X\x9e\xf5=\xe4\x88\x1b\xe0?\xe1\xaf\xa3\xc6\xf9y\xb8*\xa4\xfb-\x14\xc2\x80\xb4\xcd\xa2s\x02\xb3\xda\x18\xd7MO-\x1b/f\xed\xaa\x91y\xe9\xff\xa98\xc5\xad\x8fF\'p\xdd*zjY\xb6\x89\xad\x172\xbe\x9b\xa6V\xaa{96\x89\x17\xaf`\xfd\xe5#\xab\xc5d\xf4\xc4\xcd\x1c\x9a\xc6\xd2W\x99\xdb:\x92\xc9\xf5Wr\xeb\xa3\xccl\x8b\x1a\xc3m\xf0:\xfc\xb3\xd9\xa7\x17>\x0c\x1b\xa06jk\xc9\x90\x1a\x1e\x0e\xed\x0c\xbb\xe4\x8cb\xa1\xa7\xd5Os\xc9\x86\x88>[\x96\xf0\xb3[ \xd3\xb5\xf8\xc2Y\x0b=\x9d\xbe \xf1\x93\xa8M\xfc=|c,K\xf2G\xef\tK\xcf\xcc\xb6\xe8\x04\xb6\xcf\xe4\xe7\xef+V\x02#\xa4\xe0a\xc8\xf2\x86\xf3\x8coB\xd4(\x12B!,1\xa9aV?\x13\xd1\xe7T%?\xfb \x03\x95N\n\xca\xa8\x16\xfe\x0b2}\xf4z\x96\xcfB\x9e_4\x8f%\x85\xb0\xc4,\xddL\xe3\xbe\x88>\xcf\xbd\x8b#\xe78\xa9\xc6\xb0\x10\x1e\x88\xea\xb3\x01~\xec\xa2\x96"S\x08KIu\x1f\xef|>\xa2\xcf\xae\xf9l\xbc\xd8I5\x91\xee\x82\xeb\xa2\xfa\xdc\x0b\'\\\xd4RL\xfa`\xa6\xa4|\x11\xbejv\x98\x00[ \xd3\xc5}?\xf6\xc2\x92\xa8\x98}1\x8793\xd6\x14\xc2\xd2\xb1\x03.\x04\xfbJ\xdd\xb7\xe1\xef\x1c\x95\x93\xab\xef\xc0]f\x87J\xd8\n\x0b\x1d\x95S\x04:\x1d-\x1d\xff\x12\x95\xc0\x8b\xe0NG\xb5\xe4\xe1\x13\xb0\xc4\xecp\n\xfe\xd5Q-\xc5\xa1\x99\xb0D\xec\x81f\x184\xfb\xac\x81Un\xaa\xc9\xd3\x9a\xa87\x87\xe5\xd0\x02s\xddT3\xe64\x13\x96\x88\x07\xa2\x12\xf8\x81\xb8&\x10\xb8\x16\xdeov\x18\x84\x7fsTK\x11h&,\x05\xfba\x1e\x18+\xd8W\xc1\x9f`\x81\xbb\x8a\xf2\xd6\x02\x17\x98\xa7\xd3\xd5\xb0\x07\xa6;+h\x0ci&,\x05\x0f\x9a\t\x04>\x1d\xef\x04\x02\xcdQ\xcb\xcc\xf4\xc1\x83\x8ej\x19k\x9a\t\x83w\x18\x9a\xc0\xb8e\xa9\nvC\xa3\xbb\x8aF\xa9\x1d\xe6\x81\xb1nb\x1d\xb4\x82\xf7\xaf\x19\xe4M3a\xf0\x1e6\x13\x08\xdc\x91\x84\x04\x02\x8d\xf01\xb3C\x17<\xe4\xa8\x961\xa5\x990l\xc3p\x1e\xbc\x91\xbdC9\xec\x80y\xee**\xc8nXh~\xc2\xb4\x08\xb6y\xfa\xde\xf9\xe8i&\x0c\xdbo\xcd\x04\x02\x1fMN\x02\x81y\xf0\x11\xb3\xc3v\xf8\x9d\xa3Z\xc6\x8eB\x18\xb6\x1f\x98\xad)\xb8\xcfQ!c\xe6\xbe\xa8\x89\xce\x1er\x1c\xe9t4`\xc7\xa0\x11\x8cG[\xdf\x08O\xba+g\xcc\xdc\x04\xbf\xcc\xdeZ\x0b\xfb!\xcbj\xa8\xb1\xa4\x990`\x8f\x98\t\x04>\xe9\xa8\x901f\x7f\xb7\xae\x07\x1eqT\xc8\x18\xd1L\x18\xb0\x15\xf0J\xf6\xd6FhM\xe6"C\x03\xd0\x04Y\xd6\xf6\x07X\x9e\xac\xc7\x1bj&\x0c\xd5v3\x81\xc0\x1d\xc9L P\x11u\xad\xe2\x95\xa8\x8f\xa3\xe2E!\x0c\xd5cfk\n>\xee\xa8\x90\xa2\x88,\xde\x1e~\xbc(\x84\xa1\xb2_\x85\xd7\'\xf7\x9e\x03\x00\xe6\xc1\xf5f\x07\x85P<\xdb\x0b\x1b\xcd\x0ew8*\xa4\x88\xec\xc9\xf0\x0f\xb0\xd7Q!\x05S\x08\x83d?\xcd\xaf\x06\xb2,\xcb\x9d$7D\xad\x99\xff\x84\xa3B\n\xa6\x10\x06\xc9>\x19{7\xd49*\xa4\x88\xea\xe0\xddf\x87\xc4\x9c\x91*\x84\xe1\xe9\x80\x17\xcc\x0e\xb78*\xa4\xe8\xec\x81\xbc\x00\x07\x1c\x15R\x18\x850<\xcf\x98\x0f\x0f+\x87\x1b\xdd\xd5R\\7\x81\xf1\x84\xd3!\xc8\xed\x01\xe0\xbe)\x84\xe1Yc\xb6\xaeJ\xe2\x1dwY\x9c\x03\xd7\x98\x1d\xd6\xba\xa9\xa3@\na`\x86a\x9d\xd9!\x98s\xd1\xd3\xec\xe1\xacK\xc4\x13E\xf5\xb5\xb5\xc0\xec\x84f\xb3\xc3\xde8\xad\xed[\xb87a\x8e\xd9a\'\xccwT\xcbhi&\x0c\x8c}\x02\xd6\x1cV\x02\x81\xd9Q\xab\xe3$\xe0\x8cT!\x0c\xcc:\xb35\xb6\x8b\x1a\x16\xc2\x1e\xd4:7E\x14B!\x0c\xc9p\xd4\x1f\xfe\x12\x0c\xe1\xda\xf8\xbf-\xd4{\xc2\x90\xec\x80\xb7\x99\x1d\xdaa\x86\xa3Z\xdc\xd9\x1f\xb5P\xd5\x8e\xa8\xf7\xc9\x9ei&\x0c\xc9z\xb3\xf5\xbc\x10\x13\x08\xcc\x80Ef\x87\xb8\xaf:\xa3\x10\x86\xc4\xbe\x810\xc8s\xd1\xd3\xec\xa1mrT\xc5h)\x84!\xb1Cx\xb5\xa3*<\xb0\x87f\x1f\x16\xff\x14\xc2`\x0c\xc1\xabf\x87\xe5\x8e\n\xf1\xc0\x1e\xda\xa6\x98?\xda^!\x0cF\x0bteo\xad\x8b\xf9\x87\x13\x85Y\x08\xe3\xb3\xb7v\xc1Nw\xb5\xe4O!\x0c\x86}\xd2\xb54\xe8\xdfu\x19,5;\xc4\xfa\x8c4\xe0_L\xa9\xb1_gowT\x857\xf6\x00\x15BqA!4(\x84\xe2\xc2\x1f\xcd\xd6\x12\x0f\xa1}p<\xd37f\xc2\xd0\t\x13\xb2\xb7V@W\xd4\x8a,I\xd7\x07u0\x90\xbd\xc3\t\xa8wWN>4\x13\x86\xc1\xfe\xf4oA\xe8\t\x04\xaa\xa3nY\xda\xe5\xa8\x90\xfc)\x84a\x88\x0ca)\xb0\x87\x19\xdf\xab\x14\na\x18\xec?\xf3q\xbf\xabu\x8ch&\x14\x9f4\x13\xa2\x99P\xfc\xb2_a\x9a\tQ\x08\xa5\xd84\x13\x92\xdc\x99P\x97(\x020\x0050\x98\xbdC7\x8csW\x8e7\xdd\xe6\xca\xe2\xe5\xd0\x1b\xcf\xa7\xc1i&\x0c\xc0A3\x81\xd3K#\x81\xc0x\x98\x9e\xbdu\x10\x0e\xb9\xab%\x1f\na\x00\x0e\x9a\xad\xf6\xd2\x0f\x81\xb1\x97\x0e\xb0\x0f\x947\na\x00\xec\xd7\xd6TGU\xc4\x82=X\x85P\x8aE!LS\x08\xc5\x0f\x850M!\x14?\x14\xc24\x85P\xfcP\x08\xd3\x14B\xf1C!LS\x08\xc5\x8f\xc3f\xeb\x14GU\xc4\x82\x1dB\xfb@y\xa3\x10\x06\xa0\xc7l\x8d\xe9\x9d\xac\xc5a\x0f\xd6>P\xde(\x84\x01\xe83[\x83\xbf\x9d\xf7\xcfU\x99\xad\xf6\x81\xf2F!\x0c\x80B\x98f\x0fV!\x94b\xb1_[\xf6\xe4\x10\x18\xcd\x84\xe2\x87f\xc24\xcd\x84\xe2G\xaf\xd9\xaa\x990\xcd>P\xde(\x84\x01\xd0L\x98\xa6\x99P\xfcP\x08\xd3\x12\x19B\xddY\x1f\x80\x94\xd9:XJ\x7fj\x87\xa0<{k*\x9e\xcfH+\x9d_O\xc0*\xcdVcQ\xea\xf0\x9c2[\xed\x03\xe5\x8dB\x18\x80D\x9e\x83\x15G"\xcf\xcc\x15\xc2\x00(\x84i\n\xa1\xf8Qc\xb6\xf6;\xaa"\x16\xec\xc1\xda\x07\xca\x1b\x850\x00\x9a\t\xd34\x13\x8a\x1f\xf6kK3a\x9aB(\xc5\xa2\x990M3\xa1\xf8\xa1\x10\xa6i&\x14?j\xcd\xd6NGU\xc4\x82=X\xfb@y\xa3\x10\x06\xc0^\xc0"\xa6k:\x14\x87\xbd\xd0}LW\xfaP\x08\x030\xcdl\x8d\xe9\x03\x18\x8a\xc3\x1e\xac}\xa0\xbcQ\x08\x03\xa0\x10\xa6)\x84\xe2\x87B\x98\xa6\x10\x8a\x1f\na\x9aB(~(\x84i\n\xa1\xf8\xa1\x10\xa6)\x84\xe2\x87\xfd\xdajwTE,\xec7[c\x1aB\xddY\x1f\x00=\xb3\xfe4=\xb3^\xbc\xa9\x809f\x87\xdd\x8e\n\xf1\xcc\x1efS<\x13\x88B\x18\x8a\x05f\xebNGUxf\x0f\xd3>D>)\x84a\xb0_a\xbb\x1cU\xe1\x99=L\x85P\x8aK3!\x9a\t\xc5\xaf\xf9f\xabfB\xa2\x0e\x91O\na\x184\x13\x92\xdc\x99P\x97(\xc2\xd0\t\x13\xb2\xb7V@Wloi\x1d#}Pg.\xb2z"\xb6\xcfK\xd5L\x18\x86z\xf3J\xf4\x00\xfc\xc9]-~l5\x13\xd8\x10\xdb\x04\xa2\x10\x06\xe4"\xb3u\x93\xa3*\xbc\xb1\x07h\x1f\x1c\xcf\x14\xc2`,7[K<\x84\xf6\xc1\xf1L!\x0c\x86BhP\x08\xc5\x05\xfbu\xb69\x9e\x0f$\x1a#\x83\xb0\xd9\xec\xa0\x10\x8a\x0b\xcd\xe6\xd7\x97\xbb\xa0\xc5]-\xae\xb5@w\xf6\xd6\xfa8_\x9f@!\x0cH\x19,3;\xbc\xe2\xa8\x10\x0f\xec\xa1-\x8b\xf9\xeb<\xd6\xc5I\x9e\xec\x93\xae\xdf8\xaa\xc2\x03{h\xb1>\x17E!\x0c\x8b\xfdj[\xeb\xa8\n\x0f\xec\xa1\xbd\xddQ\x15\xa3\xa5\x10\x86\xe4\n\xb3\xf5\xf5\xa8\x1b\xcf\x13\xaa\x1d\xb6\x9b\x1d\xaetT\xc8h)\x84!i\x86F\xb3\xc3:7u\xb8\xb5\xcel\x9d\x19\xf3OeP\x08\xc3\x92\x82Uf\x87 \xcfH\xedA\xad\x82\x94\xa3BFK!\x0c\xcc5fk\t\x86\xf0\x1a7E\x14B!\x0c\x8c=\x13\xb6\xc0\x9b\x8e\nq\xe4\xcd\xa8;\x98\xec\x03\x12\x0b\na`\xe6\xc3l\xb3\xc3/\x1d\x15\xe2\xc8\x93f\xeb\x1c\x98\xe7\xa8\x90\x02(\x84\x81IE\x9d\x80=\xe6\xa6\x0eW\xec\xe1\\\x13\xff7\x84(\x84!\xba\xd6l]\x0bG\x1c\x15RtG\xa2>\x1aM\xc0\xb9(\na\x88V\x9b\x7f\xfe\x07\x03:#}\xd2\\\xf2\xb8\x0cV\xbb\xab\xa5\x00\nax\x1a\xe0*\xb3C0g\xa4\xf6@\xae\x82\x06G\x85\x14F!\x0c\xd2-f\xeb\xb3\xd0\xe5\xa8\x90"\xea\x82g\xcd\x0e\xf6A\x88\x11\x850H7\x9b\xad\xbd\xf0\x94\xa3B\x8a\xe8)\xe83;\xd8\x07!F\x14\xc2 \xcd\x81\x8b\xcd\x0e\x0f;*\xa4\x88\x1e2[/\x89\xbaT\x13#\na\xa8\xec\x93\xb1\xe7`\x8f\x9b:\x8ac7<gvH\xcc\xb9(\na\xb8\xecW\xe1p\xd4L\x12s\x91\xc5\')\x84\xff\x0b\xcd\x80\x1f!p\xa4\xf3\xce\x00\x00\x00\x00IEND\xaeB`\x82'
#
#     res = create_images_with_annotation(image_section, tmp_path)
#     assert Path(res).read_bytes() == control
#     res = create_images_with_annotation(image_section)
#     assert hash(res) == hash(QImage.fromData(QByteArray(control)))
#

# {'id': 1, 'x': 0.2503623188405797, 'y': 0.09987113402061856, 'section': ImageSection[2859], 'classtype': 'AnnotationDessin', 'width': 0.33405797101449275, 'height': 0.5889175257731959, 'tool': 'rect', 'startX': 0.0032537960954446853, 'startY': 0.0032822757111597373, 'endX': 0.9967462039045553, 'endY': 0.9967177242888403, 'styleId': 9750, 'family': '', 'underline': False, 'pointSize': 3.0, 'strikeout': False, 'weight': None, 'bgColor': PySide2.QtGui.QColor.fromRgbF(0.000000, 0.000000, 0.000000, 1.000000), 'fgColor': PySide2.QtGui.QColor.fromRgbF(0.000000, 0.000000, 0.000000, 1.000000)}
# {'id': 2, 'x': 0.6702898550724637, 'y': 0.20876288659793815, 'section': ImageSection[2859], 'classtype': 'AnnotationDessin', 'width': 0.2318840579710145, 'height': 0.4110824742268041, 'tool': 'rect', 'startX': 0.021875, 'startY': 0.0219435736677116, 'endX': 0.978125, 'endY': 0.9780564263322884, 'styleId': 9751, 'family': '', 'underline': False, 'pointSize': 14.0, 'strikeout': False, 'weight': None, 'bgColor': PySide2.QtGui.QColor.fromRgbF(0.000000, 1.000000, 0.000000, 1.000000), 'fgColor': PySide2.QtGui.QColor.fromRgbF(0.000000, 1.000000, 0.000000, 1.000000)}
# {'id': 3, 'x': 0.075, 'y': 0.29445876288659795, 'section': ImageSection[2859], 'classtype': 'AnnotationDessin', 'width': 0.14492753623188406, 'height': 0.4162371134020619, 'tool': 'trait', 'startX': 0.0025, 'startY': 0.0015479876160990713, 'endX': 0.9975, 'endY': 0.9984520123839009, 'styleId': 9752, 'family': '', 'underline': False, 'pointSize': 1.0, 'strikeout': False, 'weight': None, 'bgColor': PySide2.QtGui.QColor.fromRgbF(1.000000, 0.000000, 0.000000, 1.000000), 'fgColor': PySide2.QtGui.QColor.fromRgbF(1.000000, 0.000000, 0.000000, 1.000000)}
# {'id': 4, 'x': 0.13079710144927537, 'y': 0.16172680412371135, 'section': ImageSection[2859], 'classtype': 'AnnotationDessin', 'width': 0.10942028985507246, 'height': 0.20876288659793815, 'tool': 'ellipse', 'startX': 0.04966887417218543, 'startY': 0.046296296296296294, 'endX': 0.9503311258278145, 'endY': 0.9537037037037037, 'styleId': 9753, 'family': '', 'underline': False, 'pointSize': 15.0, 'strikeout': False, 'weight': None, 'bgColor': PySide2.QtGui.QColor.fromRgbF(0.000000, 0.000000, 1.000000, 1.000000), 'fgColor': PySide2.QtGui.QColor.fromRgbF(0.000000, 0.000000, 1.000000, 1.000000)}
# {'id': 5, 'x': 0.597463768115942, 'y': 0.264819587628866, 'section': ImageSection[2859], 'classtype': 'AnnotationDessin', 'width': 0.06811594202898551, 'height': 0.6275773195876289, 'tool': 'fillrect', 'startX': 0.0797872340425532, 'startY': 0.015400410677618069, 'endX': 0.9202127659574468, 'endY': 0.9845995893223819, 'styleId': 9754, 'family': '', 'underline': False, 'pointSize': 15.0, 'strikeout': False, 'weight': None, 'bgColor': PySide2.QtGui.QColor.fromRgbF(0.000000, 0.000000, 1.000000, 1.000000), 'fgColor': PySide2.QtGui.QColor.fromRgbF(0.000000, 0.000000, 1.000000, 1.000000)}
#
#
# @dataclass
# class M:
#     """mock uuid.uuid4"""
#
#     hex: str
#
#     @classmethod
#     def range(cls):
#         n = 1
#         while True:
#             yield M(str(n))
#             n += 1
#
#
# class TestBuildOdt:
#     def test_escape(self,):
#         assert (
#             escape("a\ta   a\na")
#             == "a<text:tab/>a<text:s/><text:s/><text:s/>a<text:line-break/>a"
#         )
#
#     @patch(
#         "package.convert.uuid.uuid4", side_effect=M.range(),
#     )
#     def test_text_section(self, mm):
#         class Sect:
#             text = """<body><p><span>text normal</span></p><h1>titre h1</h1><h2>titre h2</h2><h3>titre h3</h3><h4>titre h4</h4><p><span><br/></span></p><p><span>le debut est normal et la fin est </span><span style=" text-decoration:underline; color:#d40020;">soulignée en rouge</span><span> mais plus là.</span></p><p><span>ici </span><span style=" color:#006a4e;">vert</span><span>, </span><span style=" color:#0048ba;">blue</span><span>,</span></p><p><span> </span></p></body>"""
#
#         assert text_section(Sect()) == (
#             """<text:p text:style-name="Standard">text<text:s/>normal</text:p>
# <text:h text:style-name="Heading_20_1" text:outline-level="1">titre<text:s/>h1</text:h>
# <text:h text:style-name="Heading_20_2" text:outline-level="2">titre<text:s/>h2</text:h>
# <text:h text:style-name="Heading_20_3" text:outline-level="3">titre<text:s/>h3</text:h>
# <text:h text:style-name="Heading_20_4" text:outline-level="4">titre<text:s/>h4</text:h>
# <text:p text:style-name="Standard"></text:p>
# <text:p text:style-name="Standard">le<text:s/>debut<text:s/>est<text:s/>normal<text:s/>et<text:s/>la<text:s/>fin<text:s/>est<text:s/><text:span text:style-name="1">soulignée<text:s/>en<text:s/>rouge</text:span><text:s/>mais<text:s/>plus<text:s/>là.</text:p>\n<text:p text:style-name="Standard">ici<text:s/><text:span text:style-name="2">vert</text:span>,<text:s/><text:span text:style-name="3">blue</text:span>,</text:p>
# <text:p text:style-name="Standard"><text:s/></text:p>""",
#             """
#
# <style:style style:name="1" style:family="text"> <style:text-properties  style:text-underline-style="solid" style:text-underline-width="auto" style:text-underline-color="font-color" fo:color="#d40020"/></style:style>
# <style:style style:name="2" style:family="text"> <style:text-properties  fo:color="#006a4e"/></style:style>
# <style:style style:name="3" style:family="text"> <style:text-properties  fo:color="#0048ba"/></style:style>
# """,
#         )
#
#     @pytest.mark.parametrize(
#         "width, height, width_res, height_res", [(330, 500, 165, 250),]
#     )
#     def test_get_image_size(self, width, height, width_res, height_res):
#         image = QImage(1, 1, QImage.Format_RGB32)
#         image.fill(200)
#         image = image.scaled(
#             int(width * image.dotsPerMeterX() / 1000),
#             int(height * image.dotsPerMeterY() / 1000),
#         )
#         assert get_image_size(image) == (width_res, height_res)
